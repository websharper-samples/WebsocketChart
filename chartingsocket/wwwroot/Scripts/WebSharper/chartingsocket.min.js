(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;b=a.WebSocketChart=a.WebSocketChart||{};c=b.Client=b.Client||{};d=b.Website=b.Website||{};e=d.SomeRecord=d.SomeRecord||{};f=d.Client=d.Client||{};g=a.StartupCode$chartingsocket$Website=a.StartupCode$chartingsocket$Website||{};h=a.chartingsocket_JsonDecoder=a.chartingsocket_JsonDecoder||{};i=a.chartingsocket_JsonEncoder=a.chartingsocket_JsonEncoder||{};j=a.chartingsocket_Templates=a.chartingsocket_Templates||{};k=a.WebSharper;l=k&&k.UI;m=l&&l.Doc;n=k&&k.Concurrency;o=k&&k.AspNetCore;p=o&&o.WebSocket;q=p&&p.Client;r=q&&q.WithEncoding;s=a.JSON;t=l&&l.AttrProxy;u=k&&k.Charting;v=u&&u.Renderers;w=v&&v.ChartJs;x=l&&l.Templating;y=x&&x.Runtime;z=y&&y.Server;A=z&&z.ProviderBuilder;B=z&&z.Handler;C=z&&z.TemplateInstance;D=k&&k.List;E=k&&k.Seq;F=k&&k.Operators;G=k&&k.Control;H=G&&G.FSharpEvent;I=u&&u.LiveChart;J=u&&u.Pervasives;K=k&&k.ClientSideJson;L=K&&K.Provider;M=l&&l.Client;N=M&&M.Templates;c.WebSocketTest=function(O,P){var Q,R;function S(T){return T(function(U){var V;V=self.document.createTextNode(U+"\n");Q.elt.appendChild(V);});}Q=m.Element("pre",[],[]);n.Start((R=null,n.Delay(function(){return n.Bind(r.ConnectStateful(function(T){return s.stringify((i.j())(T));},function(T){return(h.j())(s.parse(T));},O,function(){var T;T=null;return n.Delay(function(){return n.Return([0,function(U){return function(V){var W;W=null;return n.Delay(function(){var X,Y;return V.$==3?(S(function(Z){return Z("WebSocket connection closed.");}),n.Return(U)):V.$==2?(S(function(Z){return Z("WebSocket connection open.");}),S(function(Z){return Z("Generating new data..");}),n.Return(U)):V.$==1?(S(function(Z){return Z("WebSocket connection error!");}),n.Return(U)):(X=V.$0,X.$==1?(S(function(Z){return Z("WebSocket connection error!");}),n.Return(U)):(Y=X.$0,(P.event.Trigger([a.String(Y),Y*Y]),n.Return(U+1))));});};}]);});}),function(){return n.Zero();});})),null);return Q;};e.New=function(O){return{Name:O};};f.Main=function(O){var P,Q,R,S,T,U,V;return(P=(Q=m.Element("div",[t.Create("id","myChart")],[w.Render$8(f.chart(),{$:1,$0:{$:0,$0:500,$1:350}},null,null)]),(R=(S=c.WebSocketTest(O,f.dataStream()),(T=new A.New$1(),(T.h.push({$:0,$0:"websockettest",$1:S}),T))),(R.h.push({$:0,$0:"chart",$1:Q}),R))),(U=B.CompleteHoles(P.k,P.h,[]),(V=new C.New(U[1],j.body(U[0])),P.i=V,V))).get_Doc();};f.chart=function(){g.$cctor();return g.chart;};f.dataStream=function(){g.$cctor();return g.dataStream;};f.data=function(){g.$cctor();return g.data;};g.$cctor=function(){g.$cctor=a.ignore;g.data=D.ofSeq(E.delay(function(){return E.map(function(O){return[a.String(O),O*O];},F.range(1,20));}));g.dataStream=new H.New();D.iter(function(O){f.dataStream().event.Trigger(O);},f.data());g.chart=I.Line$1(f.dataStream().event).__WithTitle("LiveChart example").__WithFillColor(new J.Color({$:0,$0:255,$1:183,$2:100,$3:0.4})).__WithPointColor(new J.Color({$:0,$0:255,$1:61,$2:0,$3:1})).__WithStrokeColor(new J.Color({$:0,$0:255,$1:114,$2:0,$3:0.8}));};h.j=function(){return h._v?h._v:h._v=(L.DecodeUnion(void 0,"type",[["int",[["$0","value",L.Id(),0]]],["string",[["$0","value",L.Id(),0]]]]))();};i.j=function(){return i._v?i._v:i._v=(L.EncodeUnion(void 0,{str:0},[["Request",[["$0","str",L.Id(),0]]]]))();};j.body=function(O){N.LoadLocalTemplates("main");return O?N.NamedTemplate("main",{$:1,$0:"body"},O):void 0;};}(self));
