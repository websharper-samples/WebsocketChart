(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;b=a.WebSocketChart=a.WebSocketChart||{};c=b.Client=b.Client||{};d=b.Website=b.Website||{};e=d.SomeRecord=d.SomeRecord||{};f=d.Client=d.Client||{};g=a.StartupCode$chartingsocket$Website=a.StartupCode$chartingsocket$Website||{};h=a.chartingsocket_JsonEncoder=a.chartingsocket_JsonEncoder||{};i=a.chartingsocket_Templates=a.chartingsocket_Templates||{};j=a.chartingsocket_JsonDecoder=a.chartingsocket_JsonDecoder||{};k=a.WebSharper;l=k&&k.UI;m=l&&l.Doc;n=k&&k.Concurrency;o=k&&k.AspNetCore;p=o&&o.WebSocket;q=p&&p.Client;r=q&&q.WithEncoding;s=a.JSON;t=l&&l.AttrProxy;u=k&&k.Charting;v=u&&u.Renderers;w=v&&v.ChartJs;x=l&&l.Templating;y=x&&x.Runtime;z=y&&y.Server;A=z&&z.ProviderBuilder;B=z&&z.Handler;C=z&&z.TemplateInstance;D=k&&k.Control;E=D&&D.FSharpEvent;F=u&&u.LiveChart;G=u&&u.Pervasives;H=k&&k.ClientSideJson;I=H&&H.Provider;J=l&&l.Client;K=J&&J.Templates;c.WebSocketTest=function(L,M){var N,O;function P(Q){return Q(function(R){var S;S=self.document.createTextNode(R+"\n");N.elt.appendChild(S);});}N=m.Element("pre",[],[]);n.Start((O=null,n.Delay(function(){return n.Bind(r.ConnectStateful(function(Q){return s.stringify((h.j())(Q));},function(Q){return(j.j())(s.parse(Q));},L,function(){var Q;Q=null;return n.Delay(function(){return n.Return([0,function(R){return function(S){var T;T=null;return n.Delay(function(){var U,V;return S.$==3?(P(function(W){return W("WebSocket connection closed.");}),n.Return(R)):S.$==2?(P(function(W){return W("WebSocket connection open.");}),P(function(W){return W("Generating new data..");}),n.Return(R)):S.$==1?(P(function(W){return W("WebSocket connection error!");}),n.Return(R)):(U=S.$0,U.$==1?(P(function(W){return W("WebSocket connection error!");}),n.Return(R)):(V=U.$0,(M.event.Trigger([a.String(R),V]),(P(function(W){return function(X){return W("New data generated: "+a.String(X));};}))(V),n.Return(R+1))));});};}]);});}),function(){return n.Zero();});})),null);return N;};e.New=function(L){return{Name:L};};f.Main=function(L){var M,N,O,P,Q,R,S;return(M=(N=m.Element("div",[t.Create("id","myChart")],[w.Render$8(f.chart(),{$:1,$0:{$:0,$0:1000,$1:700}},null,{$:1,$0:50})]),(O=(P=c.WebSocketTest(L,f.dataStream()),(Q=new A.New$1(),(Q.h.push({$:0,$0:"websockettest",$1:P}),Q))),(O.h.push({$:0,$0:"chart",$1:N}),O))),(R=B.CompleteHoles(M.k,M.h,[]),(S=new C.New(R[1],i.body(R[0])),M.i=S,S))).get_Doc();};f.chart=function(){g.$cctor();return g.chart;};f.dataStream=function(){g.$cctor();return g.dataStream;};g.$cctor=function(){g.$cctor=a.ignore;g.dataStream=new E.New();g.chart=F.Line$1(f.dataStream().event).__WithTitle("Generated data").__WithFillColor(new G.Color({$:0,$0:255,$1:183,$2:100,$3:0.4})).__WithPointColor(new G.Color({$:0,$0:255,$1:61,$2:0,$3:1})).__WithStrokeColor(new G.Color({$:0,$0:255,$1:114,$2:0,$3:0.8}));};h.j=function(){return h._v?h._v:h._v=(I.EncodeUnion(void 0,{str:0},[["Request",[["$0","str",I.Id(),0]]]]))();};i.body=function(L){K.LoadLocalTemplates("main");return L?K.NamedTemplate("main",{$:1,$0:"body"},L):void 0;};j.j=function(){return j._v?j._v:j._v=(I.DecodeUnion(void 0,"type",[["int",[["$0","value",I.Id(),0]]],["string",[["$0","value",I.Id(),0]]]]))();};}(self));
